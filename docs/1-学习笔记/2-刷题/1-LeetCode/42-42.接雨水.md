---
tags: [ğŸ˜¿ å›°éš¾, æ ˆ, æ•°ç»„, åŒæŒ‡é’ˆ, åŠ¨æ€è§„åˆ’, å•è°ƒæ ˆ]
---

# 42-42.æ¥é›¨æ°´

## é¢˜ç›®

[42.æ¥é›¨æ°´](https://leetcode.cn/problems/trapping-rain-water/?envType=study-plan-v2&envId=top-100-liked)

## é¢˜è§£

### åŒæŒ‡é’ˆ

```go
// trapå‡½æ•°è®¡ç®—å¯ä»¥åœ¨æŸ±å­ä¹‹é—´æ”¶é›†çš„é›¨æ°´æ€»é‡ã€‚
// å‚æ•°heightæ˜¯ä¸€ä¸ªç”±éè´Ÿæ•´æ•°ç»„æˆçš„æ•°ç»„ï¼Œè¡¨ç¤ºé«˜åº¦å›¾ï¼Œæ¯ä¸ªæŸ±å­çš„å®½åº¦ä¸º1ã€‚
// è¿”å›å¯ä»¥æ”¶é›†çš„é›¨æ°´æ€»é‡ã€‚
func trap(height []int) int {
    n := len(height) // è·å–è¾“å…¥æ•°ç»„çš„é•¿åº¦

    left, right := 0, n-1 // åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„å¼€å¤´å’Œç»“å°¾
    maxLeft, maxRight := height[left], height[right] // åˆå§‹åŒ–å·¦å³ä¸¤ä¾§çš„æœ€å¤§é«˜åº¦
    sum := 0 // åˆå§‹åŒ–å¯ä»¥æ”¶é›†çš„é›¨æ°´æ€»é‡

    for left < right { // å¾ªç¯ç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡
        maxLeft = max(maxLeft, height[left]) // æ›´æ–°å·¦ä¾§çš„æœ€å¤§é«˜åº¦
        maxRight = max(maxRight, height[right]) // æ›´æ–°å³ä¾§çš„æœ€å¤§é«˜åº¦
        if height[left] < height[right] { // å¦‚æœå·¦ä¾§çš„é«˜åº¦å°äºå³ä¾§çš„é«˜åº¦
            sum += maxLeft - height[left] // è®¡ç®—å¯ä»¥ä»å·¦ä¾§æ”¶é›†çš„é›¨æ°´æ€»é‡
            left++ // å°†å·¦ä¾§æŒ‡é’ˆå‘å³ç§»åŠ¨
        } else { // å¦‚æœå³ä¾§çš„é«˜åº¦å°äºç­‰äºå·¦ä¾§çš„é«˜åº¦
            sum += maxRight - height[right] // è®¡ç®—å¯ä»¥ä»å³ä¾§æ”¶é›†çš„é›¨æ°´æ€»é‡
            right-- // å°†å³ä¾§æŒ‡é’ˆå‘å·¦ç§»åŠ¨
        }
    }

    return sum // è¿”å›å¯ä»¥æ”¶é›†çš„é›¨æ°´æ€»é‡
}

// max å‡½æ•°è¿”å›ä¸¤ä¸ªæ•´æ•°ä¸­çš„æœ€å¤§å€¼ã€‚
func max(x, y int) int {
    if x > y {
        return x
    }
    return y
}

// min å‡½æ•°è¿”å›ä¸¤ä¸ªæ•´æ•°ä¸­çš„æœ€å°å€¼ã€‚
func min(x, y int) int {
    if x < y {
        return x
    }
    return y
}
```

### åŠ¨æ€è§„åˆ’

```go
func trap(height []int) int {
  n := len(height)

  // max_left[i] è¡¨ç¤º i åŠå·¦è¾¹ä½ç½®çš„æœ€å¤§é«˜åº¦
  max_left := make([]int, n)
  max_left[0] = height[0]
  for i := 1; i < n; i++ {
    max_left[i] = max(max_left[i-1], height[i])
  }

  // max_right[i] è¡¨ç¤º i åŠå³è¾¹ä½ç½®çš„æœ€å¤§é«˜åº¦
  max_right := make([]int, n)
  max_right[n-1] = height[n-1]
  for i := n-2; i >= 0; i-- {
    max_right[i] = max(max_right[i+1], height[i])
  }

  sum := 0
  for i, h := range height {
      sum += min(max_left[i], max_right[i]) - h
  }

  return sum
}

func max(a, b int) int {
  if a > b {
    return a
  }
  return b
}

func min(a, b int) int {
  if a < b {
    return a
  }
  return b
}
```

### å•è°ƒæ ˆ

- [ ] todo
