---
tags: [ğŸ˜º ä¸­ç­‰, æ ‘, æ·±åº¦ä¼˜å…ˆæœç´¢, äºŒå‰æ ‘]
---

# 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ

## é¢˜ç›®

::: info é“¾æ¥
[236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/)
:::

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

::: info ç¤ºä¾‹ä¸€

**è¾“å…¥**ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1  
**è¾“å‡º**ï¼š3  
**è§£é‡Š**ï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚

![236_ç¤ºä¾‹ä¸€](images/236_ç¤ºä¾‹ä¸€.drawio.png)

:::

::: info ç¤ºä¾‹äºŒ

**è¾“å…¥**ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4  
**è¾“å‡º**ï¼š5  
**è§£é‡Š**ï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚

![236_ç¤ºä¾‹äºŒ](images/236_ç¤ºä¾‹äºŒ.drawio.png)

:::

## é¢˜è§£

### é€’å½’

æœ€è¿‘å…¬å…±ç¥–å…ˆ $x$ æœ‰ä¸¤ç§æƒ…å†µï¼Œ

-   $p$ å’Œ $q$ ä¸º $x$ çš„å­èŠ‚ç‚¹
-   $p$ ä¸º $q$ ç¥–å…ˆæˆ–è€… $q$ ä¸º $p$ ç¥–å…ˆ

è®° $f_x$ ä¸º $x$ èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹åŒ…å« $p$ æˆ–è€… $q$ï¼Œé‚£ä¹ˆ

$$
(f_l \&\& f_r) || ((x == p || x==q) \&\& (f_l || f_r))
$$

```go
/**
 * Definition for a binary tree node.
 * type TreeNode struct {
 *     Val int
 *     Left *TreeNode
 *     Right *TreeNode
 * }
 */
// lowestCommonAncestor returns the lowest common ancestor of two nodes in a binary tree.
// If one of the nodes is the ancestor of the other, it returns the ancestor node.
// If neither node is in the tree, it returns nil.
func lowestCommonAncestor(root, p, q *TreeNode) *TreeNode {
    // If the root is nil, return nil.
    if root == nil {
        return nil
    }

    // If the root is one of the nodes, return the root.
    if root.Val == p.Val || root.Val == q.Val {
        return root
    }

    // Recursively search for the nodes in the left and right subtrees.
    left := lowestCommonAncestor(root.Left, p ,q)
    right := lowestCommonAncestor(root.Right, p, q)

    // If both nodes are found in different subtrees, return the root.
    if left != nil && right != nil {
        return root
    }

    // If one of the nodes is not found in the left subtree, return the right subtree.
    if left == nil {
        return right
    }

    // If one of the nodes is not found in the right subtree, return the left subtree.
    return left
}
```
